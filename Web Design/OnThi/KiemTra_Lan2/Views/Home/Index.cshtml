@{
    ViewData["Title"] = "Home Page";
}

@model IEnumerable<HangHoa>

<a class="btn btn-success text-white" asp-action="Create">
    <i class="bi bi-plus">Add</i>
</a>

<partial name="NguyTheQuang_Body" model="Model" />

<ul class="pagination">
    @for (int i = 1; i <= ViewBag.PageNum; i++)
    {
        <li class="page-item" page="@i"
        @(ViewBag.Mid != null ? "mid = '@ViewBag.Mid'" : "")
        @(ViewBag.Keyword != null ? "keyword = '@ViewBag.Keyword'" : "")>
            <a class="page-link">@i</a>
        </li>
    }
</ul>


@section Scripts {
    <script>
        // Phan loai
        $("ul li a").on('click', function () {
            var id = $(this).attr("id")
            $.ajax({
                url: "/Home/HangHoaTheoLoai",
                data: { maloaihang: id },
                success: function (res) {
                    $("#contentView").html(res)
                }
            })
        })

        // Phan loai combobox
        $(document).ready(function () {
            $("#loaiHang").change(function () {
                var id = $(this).val();
                $.ajax({
                    url: "/Home/LoaiHangSelect",
                    data: { mid: id },
                    success: function (response) {
                        $("#contentView").html(response);
                    }
                });
            });
        });

        // Tim Kiem
        $("input#btnSearch").click(function (e) {
            var keyword = $("#keyword").val();
            var data = { keyword: keyword };
            $.ajax({
                url: "/Home/SearchByName",           //Đường dẫn gửi request
                data: data,						//Tham số được gửi kèm request lên server
                success: function (response) {		// callback function khi nhận response từ server
                    $("#contentView").html(response);
                }
            });
        });

        // Phan trang
        $('body').on('click', 'li.page-item', function (e) {
            var page = $(this).attr("page");
            var mid = $(this).attr("mid")
            var data = { id: mid, pageIndex: page }
            console.log(data)
            $.ajax({
                url: "/Home/Paging",
                data: data,
                success: function (res) {
                    $("#contentView").html(res);
                }
            })
        })

    </script>
}